<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>F1 4K â€“ Shaka Player</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Shaka Player -->
<script src="https://cdn.jsdelivr.net/npm/shaka-player@4.7.11/dist/shaka-player.compiled.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #000;
  height: 100%;
  width: 100%;
}

video {
  width: 100%;
  height: 100%;
  background: #000;
}
</style>
</head>

<body>

<video id="video" controls autoplay></video>

<script>
async function initPlayer() {
  if (!shaka.Player.isBrowserSupported()) {
    alert("Browser not supported!");
    return;
  }

  const video = document.getElementById('video');
  const player = new shaka.Player(video);

  // Log errors
  player.addEventListener('error', e => {
    console.error('Shaka Error', e.detail);
  });

  // ClearKey configuration
  player.configure({
    drm: {
      clearKeys: {
        "4a49e721dba048be8bebbab4f0410898": "709561f239d6700b7cd355358aa8e393"
      }
    }
  });

  const manifestUri =
    "https://live1-814bffb9b389f652.fastly.foxtelgroupcdn.net.au/out/v1/4bbc6fe6e52c4b40a33ccc7b338652e5/index.mpd";

  try {
    await player.load(manifestUri);
    console.log("F1 4K loaded successfully");
  } catch (error) {
    console.error("Load error", error);
  }
}

document.addEventListener('DOMContentLoaded', initPlayer);
</script>

</body>
</html>
